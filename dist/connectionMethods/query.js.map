{"version":3,"sources":["../../src/connectionMethods/query.js"],"names":["query","connectionLogger","connection","clientConfiguration","rawSql","values","inheritedQueryId","finalConnection","finalSql","finalValues","result","fields","dataTypeId","field","dataTypeID","name","command","notices","rowCount","rows"],"mappings":";;;;;;;AAKA;;AAOA,MAAMA,KAAmC,GAAG,OAAOC,gBAAP,EAAyBC,UAAzB,EAAqCC,mBAArC,EAA0DC,MAA1D,EAAkEC,MAAlE,EAA0EC,gBAA1E,KAA+F;AACzI;AACA,SAAO,4BACLL,gBADK,EAELC,UAFK,EAGLC,mBAHK,EAILC,MAJK,EAKLC,MALK,EAMLC,gBANK,EAOL,OAAOC,eAAP,EAAwBC,QAAxB,EAAkCC,WAAlC,KAAkD;AAChD,UAAMC,MAAM,GAAG,MAAMH,eAAe,CAACP,KAAhB,CAAsBQ,QAAtB,EAAgCC,WAAhC,CAArB;;AADgD,sBAKlCC,MAAM,CAACC,MAAP,IAAiB,EALiB;;AAAA;;AAAA;AAAA;AAAA,sBAMrC;AACLC,QAAAA,UAAU,EAAEC,MAAK,CAACC,UADb;AAELC,QAAAA,IAAI,EAAEF,MAAK,CAACE;AAFP,OANqC;AAAA;;AAGhD,WAAO;AACLC,MAAAA,OAAO,EAAEN,MAAM,CAACM,OADX;AAELL,MAAAA,MAAM,SAFD;AAQLM,MAAAA,OAAO,EAAEP,MAAM,CAACO,OAAP,IAAkB,EARtB;AASLC,MAAAA,QAAQ,EAAER,MAAM,CAACQ,QAAP,IAAmB,CATxB;AAULC,MAAAA,IAAI,EAAET,MAAM,CAACS,IAAP,IAAe;AAVhB,KAAP;AAYD,GAtBI,CAAP;AAwBD,CA1BD;;eA4BenB,K","sourcesContent":["// @flow\n\nimport {\n  map,\n} from 'inline-loops.macro';\nimport {\n  executeQuery,\n} from '../routines';\nimport type {\n  InternalQueryFunctionType,\n} from '../types';\n\nconst query: InternalQueryFunctionType<*> = async (connectionLogger, connection, clientConfiguration, rawSql, values, inheritedQueryId) => {\n  // $FlowFixMe\n  return executeQuery(\n    connectionLogger,\n    connection,\n    clientConfiguration,\n    rawSql,\n    values,\n    inheritedQueryId,\n    async (finalConnection, finalSql, finalValues) => {\n      const result = await finalConnection.query(finalSql, finalValues);\n\n      return {\n        command: result.command,\n        fields: map(result.fields || [], (field) => {\n          return {\n            dataTypeId: field.dataTypeID,\n            name: field.name,\n          };\n        }),\n        notices: result.notices || [],\n        rowCount: result.rowCount || 0,\n        rows: result.rows || [],\n      };\n    },\n  );\n};\n\nexport default query;\n"],"file":"query.js"}